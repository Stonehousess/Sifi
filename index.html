<!DOCTYPE html>

<html><head><title>Random Movie TV Viewer</title><style>
body {
    background-color: #000;
    color: #fff;
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 0;
    margin: 0;
}
#movie-poster {
    transition: transform 0.3s ease;
    height: 100vh;
    object-fit: cover;
    display: block;
    margin: 0 auto;
}
#movie-title {
    font-size: 28px;
    margin-top: 12px;
}
#info-line {
    font-size: 18px;
    margin: 6px 0;
}
#movie-description {
    max-width: 800px;
    margin: 10px auto;
    padding: 10px;
    font-size: 16px;
    line-height: 1.5;
}
.floating-buttons {
    position: fixed;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 10px;
    z-index: 1000;
    opacity: 0.5;
}
.floating-buttons button {
    width: 120px;
    height: 40px;
    background-color: #222;
    color: #ffcc00;
    border: 1px solid #ffcc00;
    border-radius: 5px;
    cursor: pointer;
}
.floating-buttons button:hover {
    background-color: #444;
}
#loading-spinner {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #111;
    color: #ffcc00;
    padding: 20px 40px;
    font-size: 20px;
    border: 2px solid #ffcc00;
    border-radius: 10px;
    z-index: 2000;
    display: none;
}


#movie-poster:hover {
    transform: scale(1.05);
}</style></head><body>
<div id="loading-spinner">Loading...</div>
<img alt="Movie Poster" id="movie-poster" src=""/>
<h1 id="movie-title">Loading...</h1>
<p id="info-line"></p>
<p id="current-genre">Genre: </p><p id="movie-description"></p>
<div class="floating-buttons">
<button id="save-button">Poster</button>
<button id="trailer-button">Trailer</button>
<button id="tmdb-button">TMDB</button>
<button id="next-button">Next</button>
<button id="genre-button">Genre</button>
</div>
<script>
const API_KEY = 'e8d804d1f104509d3c1c5b1166485ae6';

const genres = [
    { name: 'Sci-Fi', movieId: '878', tvId: '10765' },
    { name: 'Adventure', movieId: '12', tvId: '10759' },
    { name: 'Comedy', movieId: '35', tvId: '35' },
    { name: 'Documentary', movieId: '99', tvId: '99' },
    { name: 'Animation', movieId: '16', tvId: '16' },
    { name: 'Romance', movieId: '10749', tvId: '18' },
    { name: 'Crime', movieId: '80', tvId: '80' },
    { name: 'Mystery', movieId: '9648', tvId: '9648' }
    { id: '53', name: 'Thriller' },
    { id: '878', name: 'Sci-Fi' },
    { id: '12', name: 'Adventure' },
    { id: '35', name: 'Comedy' },
    { id: '99', name: 'Documentary' },
    { id: '16', name: 'Animation' },
    { id: '10749', name: 'Romance' },
    { id: '80', name: 'Crime' }
];

let currentGenre = genres.find(g => g.name === 'Animation');
let currentPosterPath = '';
let currentMovieId = '';
let isMovie = true;
let triedTV = false;
let isFetching = false;

async function getRandomTitle() {
    if (isFetching) return;
    isFetching = true;
    document.getElementById('loading-spinner').style.display = 'block';

    const endpoint = isMovie ? 'movie' : 'tv';
    const genreId = isMovie ? currentGenre.movieId : currentGenre.tvId;
    const randomPage = Math.floor(Math.random() * 50) + 1;
    const url = `https://api.themoviedb.org/3/discover/${endpoint}?api_key=${API_KEY}&language=en-US&sort_by=popularity.desc&with_genres=${genreId}&page=${randomPage}`;

    try {
        const response = await fetch(url);
        const data = await response.json();
        const results = (data.results || []).filter(r => r.poster_path);

        
        if (!results.length && !isMovie) {
            console.warn("No TV results, trying movie fallback.");
            isMovie = true;
            getRandomTitle(); return;
        }

        if (!results.length) throw new Error("No results");

        const item = results[Math.floor(Math.random() * results.length)];
        const title = item.title || item.name;
        const posterPath = item.poster_path;
        const id = item.id;
        const year = (item.release_date || item.first_air_date || '').slice(0, 4);
        const rating = item.vote_average.toFixed(1);
        const runtime = item.runtime || (item.episode_run_time ? item.episode_run_time[0] : 'â€”');
        const description = item.overview || 'No description available.';

        currentPosterPath = 'https://image.tmdb.org/t/p/w500' + posterPath;
        currentMovieId = id;

        const emoji = isMovie ? "ðŸŽ¬" : "ðŸ“º";

        document.getElementById('movie-title').innerText = title + ' (' + year + ')';
        document.getElementById('movie-poster').src = currentPosterPath;
        document.getElementById('info-line').innerText = `${emoji} IMDb Rating: ${rating} | Runtime: ${runtime} min`;
        document.getElementById('movie-description').innerText = description;

        document.getElementById('loading-spinner').style.display = 'none';
        isFetching = false;
        isFetching = false;
    } catch (err) {
        console.error("Fetch failed:", err);
        isFetching = false;
        document.getElementById('loading-spinner').style.display = 'none';
        isFetching = false;
        isFetching = false;
    }

    isMovie = !isMovie;
}

window.onload = () => {
    currentGenre = genres.find(g => g.name === 'Animation');
    document.getElementById('current-genre').innerText = 'Genre: ' + currentGenre.name;
    getRandomTitle();

    document.getElementById('movie-poster').onclick = getRandomTitle;
    document.getElementById('next-button').onclick = getRandomTitle;

    document.getElementById('genre-button').onclick = () => {
        currentGenre = genres[Math.floor(Math.random() * genres.length)];
        isMovie = true;
        triedTV = false;
        document.getElementById('current-genre').innerText = 'Genre: ' + currentGenre.name;
        document.getElementById('current-genre').innerText = 'Genre: ' + currentGenre.name;
        document.getElementById('current-genre').innerText = 'Genre: ' + currentGenre.name;
    getRandomTitle();
    };

    document.getElementById('save-button').onclick = () => {
    if (!currentPosterPath) return;
        if (!currentPosterPath) return;
        const link = document.createElement('a');
        link.href = currentPosterPath;
        link.style.display = 'none';
        document.body.appendChild(link);
        link.download = 'poster.jpg';
        link.click();
        document.body.removeChild(link);
    };

    document.getElementById('tmdb-button').onclick = () => {
        if (!currentMovieId) return;
        const base = isMovie ? 'movie' : 'tv';
        window.open(`https://www.themoviedb.org/${base}/${currentMovieId}`, '_blank');
    };

    document.getElementById('trailer-button').onclick = () => {
        const title = document.getElementById('movie-title').innerText.split(' (')[0];
        window.open(`https://www.youtube.com/results?search_query=${encodeURIComponent(title)} trailer`, '_blank');
    };
};


setInterval(getRandomTitle, 60000);</script></body></html>